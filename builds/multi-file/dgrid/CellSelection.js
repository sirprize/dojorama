//>>built
define("dgrid/CellSelection",["dojo/_base/declare","./Selection","dojo/on","put-selector/put","dojo/has"],function(p,q,r,m,s){return p(q,{selectionDelegate:".dgrid-cell",select:function(a,g,c){var d,e;void 0===c&&(c=!0);if("object"!=typeof a||!("element"in a))a=this.cell(a);else if(!a.row){for(e in c)this.select(this.cell(a.id,e),null,c[e]);return}if(this.allowSelect(a)){var h=a.row.id,b=this.selection[h];if(a.column){var f=b&&b[a.column.id];null===c&&(c=!f);var k=a.element,b=b||{};b[a.column.id]=
c;this.selection[h]=b;var n=!1;for(d in b)if(!0===b[d]){n=!0;break}n||delete this.selection[h];k&&(c?m(k,".dgrid-selected.ui-state-active"):m(k,"!dgrid-selected!ui-state-active"));c!=f&&k&&this._selectionEventQueue(c,"cells").push(a);if(g){g.element||(g=this.cell(g));f=g.element;d=a.element;h=f&&(f.compareDocumentPosition?2==f.compareDocumentPosition(d):f.sourceIndex>d.sourceIndex)?"nextSibling":"previousSibling";d=a.column.id;var f=g.column.id,l,b=[];for(e in this.columns)if(l&&b.push(e),e==d&&(d=
b)||e==f&&(f=b)){b.push(e);if(l||d==b&&e==f)break;l=!0}e=a.row.element;f=g.row.element;do{for(d=0;d<b.length;d++)a=this.cell(e,b[d]),this.select(a,null,c);if(e==f)break}while(e=a.row.element[h])}}else for(d in this.columns)this.select(this.cell(h,d),null,c)}},isSelected:function(a,g){if("undefined"===typeof a||null===a)return!1;a.element||(a=this.cell(a,g));var c=a.row.id;return c in this.selection?!!this.selection[c][a.column.id]:this.allSelected&&(!a.row.data||this.allowSelect(a))},clearSelection:function(a){a=
!1;this.inherited(arguments)}})});